<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>אישור ליווי לטיפול פרא רפואי - אורטל קורצקי</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Assistant:wght@400;500;600;700&family=Frank+Ruhl+Libre:wght@400;500;700&display=swap');

        :root {
            --primary-color: #1a2a3a;
            --accent-color: #4a6741;
            --gold-accent: #b8956a;
            --text-color: #2c3e50;
            --light-bg: #f7f8fa;
            --border-color: #e2e5e9;
        }

        body {
            font-family: 'Assistant', 'Segoe UI', Tahoma, sans-serif;
            background-color: #eef0f3;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text-color);
        }

        .controls {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 2px 16px rgba(0,0,0,0.08);
            margin-bottom: 25px;
            display: flex;
            gap: 15px;
            align-items: center;
            width: 100%;
            max-width: 800px;
            position: sticky;
            top: 10px;
            z-index: 100;
            border-right: 4px solid var(--primary-color);
        }

        .instructions {
            font-size: 14px;
            color: #7f8c8d;
            flex-grow: 1;
        }

        .instructions strong {
            color: var(--primary-color);
        }

        button {
            padding: 12px 24px;
            font-size: 15px;
            font-family: 'Assistant', sans-serif;
            font-weight: 700;
            cursor: pointer;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 6px;
            transition: all 0.2s;
            white-space: nowrap;
        }

        button:hover {
            background-color: #0f1d2a;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(26,42,58,0.3);
        }

        .page {
            background-color: white;
            width: 100%;
            max-width: 210mm;
            min-height: 297mm;
            padding: 25mm;
            box-shadow:
                0 1px 3px rgba(0,0,0,0.08),
                0 8px 30px rgba(0,0,0,0.06);
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .header-logo {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            position: relative;
        }

        .header-logo::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60%;
            height: 0;
            border-top: 2px solid var(--primary-color);
            border-bottom: 1px solid var(--gold-accent);
            padding-bottom: 3px;
        }

        .editable-title {
            font-family: 'Frank Ruhl Libre', 'David', serif;
            font-size: 26px;
            font-weight: 700;
            margin: 0;
            color: var(--primary-color);
            letter-spacing: 0.5px;
            outline: none;
        }

        .editable-info {
            font-size: 13px;
            color: var(--accent-color);
            margin: 10px 0 0;
            font-weight: 500;
            outline: none;
            letter-spacing: 0.3px;
        }

        .date-line {
            text-align: left;
            margin-bottom: 30px;
            font-size: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .recipient {
            font-weight: bold;
            margin-bottom: 25px;
            font-size: 17px;
            color: var(--primary-color);
        }

        .subject-container {
            text-align: center;
            margin-bottom: 30px;
        }

        .subject {
            font-family: 'Frank Ruhl Libre', 'David', serif;
            font-size: 19px;
            font-weight: 700;
            color: var(--primary-color);
            padding: 8px 0;
            display: inline-block;
            border-bottom: 2px solid var(--gold-accent);
        }

        .subject span[contenteditable="true"] {
            border-bottom: 1px dashed var(--gold-accent);
            padding: 0 5px;
        }

        .subject span[contenteditable="true"]:hover {
            background-color: var(--light-bg);
        }

        .subject span[contenteditable="true"]:focus {
            background-color: white;
            color: var(--primary-color);
            outline: none;
            border-bottom: 1px solid var(--primary-color);
        }

        .content {
            line-height: 2;
            font-size: 16px;
            margin-bottom: 20px;
            text-align: justify;
        }

        .names-inputs {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
            font-size: 15px;
        }

        .names-inputs label {
            font-weight: 600;
            color: var(--primary-color);
            white-space: nowrap;
        }

        .names-inputs input[type="text"] {
            font-family: 'Assistant', sans-serif;
            font-size: 15px;
            font-weight: 600;
            padding: 6px 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            color: var(--primary-color);
            background: white;
            width: 160px;
        }

        .names-inputs input[type="text"]:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 2px rgba(74,103,65,0.15);
        }

        .appointments-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 15px;
            font-size: 14px;
        }

        .appointments-table th {
            background-color: var(--primary-color);
            color: white;
            font-weight: 600;
            padding: 10px 8px;
            text-align: center;
            font-size: 13px;
        }

        .appointments-table th:first-child {
            border-radius: 0 6px 0 0;
        }

        .appointments-table th:last-child {
            border-radius: 6px 0 0 0;
        }

        .appointments-table td {
            padding: 6px 8px;
            border-bottom: 1px solid var(--border-color);
            text-align: center;
            vertical-align: middle;
        }

        .appointments-table tbody tr:hover {
            background-color: var(--light-bg);
        }

        .appointments-table td input[type="date"],
        .appointments-table td input[type="time"] {
            font-family: 'Assistant', sans-serif;
            font-size: 14px;
            font-weight: 600;
            color: var(--primary-color);
            border: none;
            background: transparent;
            padding: 4px 2px;
            border-bottom: 1px dashed var(--border-color);
            cursor: pointer;
            width: 100%;
            box-sizing: border-box;
            text-align: center;
        }

        .appointments-table td input[type="date"]:focus,
        .appointments-table td input[type="time"]:focus {
            outline: none;
            border-bottom: 1px solid var(--accent-color);
            background-color: var(--light-bg);
        }

        .appointments-table td[contenteditable="true"] {
            border-bottom: 1px dashed transparent;
            cursor: text;
            min-width: 80px;
            padding: 6px 4px;
            transition: all 0.2s;
        }

        .appointments-table td[contenteditable="true"]:hover {
            background-color: var(--light-bg);
            border-bottom: 1px dashed var(--border-color);
        }

        .appointments-table td[contenteditable="true"]:focus {
            outline: none;
            background-color: #fff;
            border-bottom: 1px solid var(--accent-color);
            box-shadow: inset 0 -2px 0 var(--accent-color);
        }

        .appointments-table .row-num {
            font-weight: 700;
            color: var(--primary-color);
            width: 30px;
        }

        .remove-row-btn {
            background: none;
            border: none;
            color: #c0392b;
            font-size: 18px;
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 4px;
            transition: all 0.15s;
            line-height: 1;
        }

        .remove-row-btn:hover {
            background-color: #fde8e8;
            transform: none;
            box-shadow: none;
        }

        .add-row-btn {
            background-color: var(--accent-color);
            color: white;
            padding: 8px 20px;
            font-size: 14px;
            font-family: 'Assistant', sans-serif;
            font-weight: 600;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: 40px;
        }

        .add-row-btn:hover {
            background-color: #3a5433;
            transform: translateY(-1px);
            box-shadow: 0 3px 8px rgba(74,103,65,0.3);
        }

        /* Inputs Styling (document date) */
        .date-line input[type="date"] {
            font-family: 'Assistant', sans-serif;
            font-size: inherit;
            font-weight: bold;
            color: var(--primary-color);
            border: none;
            background-color: transparent;
            padding: 2px 5px;
            border-radius: 4px;
            border-bottom: 1px dashed var(--gold-accent);
            cursor: pointer;
        }

        .date-line input[type="date"]:focus {
            outline: none;
            background-color: white;
            border-bottom: 1px solid var(--primary-color);
        }

        /* Editable fields */
        div[contenteditable="true"]:not(.appointments-table td),
        strong[contenteditable="true"],
        span[contenteditable="true"]:not(.subject span) {
            padding: 0 4px;
            border-bottom: 1px dashed transparent;
            transition: all 0.25s ease;
        }

        [contenteditable="true"]:hover {
            background-color: var(--light-bg);
            border-bottom: 1px dashed var(--gold-accent);
        }

        [contenteditable="true"]:focus {
            background-color: white;
            border-bottom: 1px solid var(--accent-color);
            outline: none;
            box-shadow: 0 2px 4px rgba(74,103,65,0.1);
        }

        .signature-section {
            margin-top: auto;
            display: flex;
            justify-content: flex-start;
        }

        .signature-box {
            text-align: center;
            min-width: 250px;
            padding-top: 15px;
            position: relative;
        }

        .signature-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            border-top: 2px solid var(--primary-color);
        }

        .signature-regards {
            margin-bottom: 10px;
            font-size: 15px;
        }

        .signature-name {
            font-family: 'Frank Ruhl Libre', 'David', serif;
            font-size: 18px;
            font-weight: 700;
            color: var(--primary-color);
        }

        .signature-title {
            font-size: 13px;
            color: var(--accent-color);
            margin: 2px 0;
        }

        .signature-license {
            margin: 2px 0;
            font-size: 12px;
            color: #7f8c8d;
        }

        /* Mobile styles */
        @media (max-width: 768px) {
            .page {
                padding: 15px;
            }

            .controls {
                flex-wrap: wrap;
                padding: 10px 15px;
            }

            .editable-title {
                font-size: 20px;
            }

            .content {
                font-size: 14px;
                line-height: 1.8;
            }

            .subject {
                font-size: 16px;
            }

            .subject-container {
                margin-bottom: 20px;
            }

            .header-logo {
                margin-bottom: 20px;
            }

            .date-line {
                flex-wrap: wrap;
            }

            .date-line input[type="date"] {
                min-height: 44px;
            }

            button {
                width: 100%;
            }

            .appointments-table {
                font-size: 12px;
            }

            .names-inputs {
                flex-wrap: wrap;
                gap: 10px;
            }
        }

        .noscript-banner {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 15px 20px;
            margin-bottom: 20px;
            text-align: center;
            font-size: 15px;
            color: #856404;
            max-width: 800px;
            width: 100%;
            box-sizing: border-box;
        }

        .noscript-banner strong {
            display: block;
            font-size: 17px;
            margin-bottom: 8px;
        }

        /* Print styles — hiding is done via .printing class (added by JS) */
        .printing .controls,
        .printing .add-row-btn,
        .printing .names-inputs,
        .printing .remove-row-btn,
        .printing .noscript-banner { display: none !important; }

        .printing .appointments-table th:last-child,
        .printing .appointments-table td:last-child { display: none; }

        @media print {
            body { background: white; padding: 0; }
            .controls { display: none; }
            .add-row-btn { display: none !important; }
            .names-inputs { display: none; }
            .remove-row-btn { display: none !important; }
            .noscript-banner { display: none; }
            .appointments-table th:last-child,
            .appointments-table td:last-child { display: none; }

            .page {
                box-shadow: none;
                width: 100%;
                padding: 15mm;
            }

            .header-logo::after {
                border-top-color: black;
                border-bottom-color: #666;
            }

            .signature-box::before {
                border-top-color: black;
            }

            .subject {
                color: black !important;
                border-bottom-color: #666;
            }

            .subject span[contenteditable="true"] {
                border-bottom: none !important;
                color: black !important;
                background: none !important;
            }

            [contenteditable="true"] {
                border: none !important;
                background: none !important;
                box-shadow: none !important;
            }

            input[type="date"], input[type="time"] {
                background: transparent !important;
                border: none !important;
                padding: 0 !important;
                -webkit-appearance: none;
                appearance: none;
                color: black !important;
            }

            input[type="date"]::-webkit-calendar-picker-indicator,
            input[type="time"]::-webkit-calendar-picker-indicator {
                display: none;
            }

            .appointments-table th {
                background-color: #333 !important;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }

            .appointments-table td {
                border-bottom: 1px solid #ccc;
            }

            .appointments-table td input[type="date"],
            .appointments-table td input[type="time"] {
                border-bottom: none !important;
            }

            .appointments-table td[contenteditable="true"] {
                border-bottom: none !important;
                box-shadow: none !important;
            }
        }
    </style>
</head>
<body>

    <noscript>
        <div class="noscript-banner">
            <strong>לפתיחה מלאה באייפון</strong>
            באפליקציית קבצים (Files) → לחצי ארוך על הקובץ → שיתוף → "פתח ב-Safari"
        </div>
    </noscript>

    <div class="controls">
        <div class="instructions">
            <strong>מלאי את הפרטים בטבלה</strong> — לחצי על שדות לעריכה, ולאחר מכן הפיקי PDF.
        </div>
        <button onclick="printDoc()">הפקה ושמירה כ-PDF</button>
    </div>

    <div class="page" id="document">
        <div class="header-logo">
            <h1 class="editable-title" contenteditable="true">אורטל קורצקי – קלינאית תקשורת</h1>
            <p class="editable-info" contenteditable="true">חיים הלר 7 | טלפון: 050-8330403 | מייל: ortal.korecky@gmail.com</p>
        </div>

        <div class="date-line">
            תאריך הפקת המסמך: <input type="date" id="doc-date">
        </div>

        <div class="recipient">
            לכל מאן דבעי,
        </div>

        <div class="subject-container">
            <div class="subject">הנדון: אישור ליווי לטיפול פרא רפואי</div>
        </div>

        <div class="content">
            הריני לאשר כי <strong id="parent-display">[שם ההורה]</strong> ליווה/ליוותה את בנו/בתו <strong id="child-display">[שם הילד/ה]</strong> לטיפולי קלינאות תקשורת במרפאתי, ולשם כך נעדר/ה מעבודתו/ה בתאריכים ובשעות המפורטים להלן:
        </div>

        <div class="names-inputs">
            <label>שם ההורה:</label>
            <input type="text" id="parent-name" placeholder="[שם ההורה]">
            <label>שם הילד/ה:</label>
            <input type="text" id="child-name" placeholder="[שם הילד/ה]">
        </div>

        <table class="appointments-table">
            <thead>
                <tr>
                    <th>#</th>
                    <th>תאריך</th>
                    <th>שעת התחלה</th>
                    <th>שעת סיום</th>
                    <th>הסר</th>
                </tr>
            </thead>
            <tbody id="appointments-body">
                <tr>
                    <td class="row-num">1</td>
                    <td><input type="date"></td>
                    <td><input type="time"></td>
                    <td><input type="time"></td>
                    <td><button class="remove-row-btn" onclick="removeRow(this)" title="הסר שורה">✕</button></td>
                </tr>
            </tbody>
        </table>

        <button class="add-row-btn" onclick="addRow()">+ הוסף שורה</button>

        <div class="signature-section">
            <div class="signature-box">
                <p class="signature-regards">בברכה,</p>
                <div class="signature-name" contenteditable="true">אורטל קורצקי</div>
                <p class="signature-title">קלינאית תקשורת</p>
                <p class="signature-license">מספר רישיון (מ.ר.): 13-116005</p>
            </div>
        </div>
    </div>

    <script>
        const today = new Date();
        document.getElementById('doc-date').value = today.toISOString().split('T')[0];

        const parentInput = document.getElementById('parent-name');
        const childInput = document.getElementById('child-name');

        function updateNames() {
            document.getElementById('parent-display').textContent = parentInput.value || '[שם ההורה]';
            document.getElementById('child-display').textContent = childInput.value || '[שם הילד/ה]';
            const parent = parentInput.value.trim();
            const child = childInput.value.trim();
            if (parent || child) {
                const parts = [];
                if (child) parts.push(child);
                if (parent) parts.push(parent);
                document.title = 'אישור ליווי - ' + parts.join(' - ');
            } else {
                document.title = 'אישור ליווי לטיפול פרא רפואי - אורטל קורצקי';
            }
        }

        parentInput.addEventListener('input', updateNames);
        childInput.addEventListener('input', updateNames);

        function addRow() {
            const tbody = document.getElementById('appointments-body');
            const rowCount = tbody.rows.length + 1;
            const tr = document.createElement('tr');
            tr.innerHTML =
                '<td class="row-num">' + rowCount + '</td>' +
                '<td><input type="date"></td>' +
                '<td><input type="time"></td>' +
                '<td><input type="time"></td>' +
                '<td><button class="remove-row-btn" onclick="removeRow(this)" title="הסר שורה">✕</button></td>';
            tbody.appendChild(tr);
        }

        function removeRow(btn) {
            const tr = btn.closest('tr');
            tr.remove();
            renumberRows();
        }

        function renumberRows() {
            const rows = document.getElementById('appointments-body').rows;
            for (let i = 0; i < rows.length; i++) {
                rows[i].cells[0].textContent = i + 1;
            }
        }

        function printDoc() {
            document.body.classList.add('printing');
            setTimeout(function() {
                window.print();
                document.body.classList.remove('printing');
            }, 100);
        }
    </script>

</body>
</html>
